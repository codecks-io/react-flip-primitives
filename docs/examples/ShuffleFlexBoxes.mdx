---
name: Shuffle Flex Boxes
---

import {FlipGroup, EnterLeaveGroup} from '../../src/index'
import GenerateNumbers from "./GenerateNumbers.js"

<GenerateNumbers min={10} max={50} count={10}>{(numbers, regenerate) => (
  <FlipGroup noAnimationOnMount changeKey={numbers.join('-')} durationMs={500}>{registerNode => (
    <React.Fragment>
      <EnterLeaveGroup
        registerNode={registerNode}
        keysAndData={numbers.map((number, index) => ({key: index.toString(), data: number}))}
        enterDecorationStyle={{opacity: 0}}
        enterPositionStyle={{width: 1}}
        leaveStyle={{opacity: 0, width: 1}}
      >{(keysAndData, registerEnterLeave) => (
        <div style={{display: 'flex', flexWrap: 'wrap'}}>
          {keysAndData.map(({key, data: number}, index) => (
            <div
              key={key}
              style={{width: `${number}%`, height: 50, backgroundColor: `hsl(${number * 5}, 50%, 50%)`, margin: '0 10px 20px', opacity: 1}}
              ref={registerEnterLeave(key, {transitionProps: ["background-color", "opacity"], delayMs: index * 20})}
            />
          ))}
        </div>
      )}</EnterLeaveGroup>
      <button onClick={regenerate} ref={registerNode('button', {delayMs: numbers.length * 20})}>regenerate</button>
    </React.Fragment>
  )}</FlipGroup>
)}</GenerateNumbers>
