---
name: Shuffle Flex Boxes
---

import FlipGroup from "../../src/index";
import GenerateNumbers from "./GenerateNumbers.js";

<GenerateNumbers min={10} max={50} count={10}>
  {(numbers, regenerate) => (
    <FlipGroup
      noAnimationOnMount
      changeKey={numbers.join("-")}
      durationMs={500}
      keysAndData={numbers.map((number, index) => ({key: index.toString(), data: number}))}
      enterDecorationStyle={{opacity: 0}}
      enterPositionStyle={{width: 1}}
      leaveStyle={{opacity: 0, width: 1}}
    >
      {(registerNode, keysAndData) => (
        <React.Fragment>
          <div style={{display: "flex", flexWrap: "wrap"}}>
            {keysAndData.map(({key, data: number}, index) => (
              <div
                key={key}
                style={{
                  width: `${number}%`,
                  height: 50,
                  backgroundColor: `hsl(${number * 5}, 50%, 50%)`,
                  margin: "0 10px 20px",
                  opacity: 1,
                }}
                ref={registerNode(key, {
                  transitionProps: ["background-color", "opacity"],
                  delayMs: index * 10,
                })}
              />
            ))}
          </div>
          <button onClick={regenerate} ref={registerNode("button", {delayMs: numbers.length * 10})}>
            regenerate
          </button>
        </React.Fragment>
      )}
    </FlipGroup>
  )}
</GenerateNumbers>
